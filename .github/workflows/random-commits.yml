name: Random Commit Booster

on:
  schedule:
    - cron: '0 15 * * *'  # 10 AM EST = 15:00 UTC
  workflow_dispatch:  # Optional manual trigger

jobs:
  random-commits:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Setup Git config
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action Bot"

      - name: Add random delay before starting
        run: |
          # Random delay: 0-600 seconds (0-10 minutes)
          DELAY=$(( RANDOM % 601 ))
          echo "Sleeping for $DELAY seconds to randomize commit time..."
          sleep $DELAY

      - name: Generate random commits
        run: |
          NUM_COMMITS=$(( ( RANDOM % 3 ) + 1 ))  # 1-3 commits
          echo "Generating $NUM_COMMITS commits..."

          for i in $(seq 1 $NUM_COMMITS)
          do
            echo "Commit #$i"
            echo "Random update $RANDOM at $(date)" >> update-log.txt
            git add update-log.txt
            COMMIT_MSG="Random commit $RANDOM on $(date '+%Y-%m-%d %H:%M:%S')"
            git commit -m "$COMMIT_MSG"
            # Add optional short delay between commits (optional: 0-30 seconds)
            SHORT_DELAY=$(( RANDOM % 31 ))
            echo "Sleeping $SHORT_DELAY seconds before next commit..."
            sleep $SHORT_DELAY
          done

      - name: Push commits
        run: |
          git push
